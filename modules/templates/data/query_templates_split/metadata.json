{
  "version": "10.0.0",
  "description": "IACSGRAPH Query Templates Metadata",
  "last_updated": "2025-01-26",
  "total_templates": 175,
  "metadata": {
    "mcp_integration": true,
    "parameter_format": "mcp_enhanced",
    "includes_related_tables": true,
    "database_schema": {
      "table_schemas": {
        "agenda_all": {
          "description": "모든 의제 메일을 저장하는 메인 테이블",
          "primary_key": "id",
          "key_columns": [
            {
              "name": "agenda_base_version",
              "type": "TEXT",
              "description": "의제 기본 버전 (예: PL25016a)"
            },
            {
              "name": "sender_organization",
              "type": "TEXT",
              "description": "발신 조직 코드 (KR, NK, CCS 등)"
            },
            {
              "name": "decision_status",
              "type": "TEXT",
              "description": "의제 상태 (created, ongoing, comment, completed)"
            },
            {
              "name": "sent_time",
              "type": "TIMESTAMP",
              "description": "메일 발송 시간"
            },
            {
              "name": "subject",
              "type": "TEXT",
              "description": "메일 제목"
            },
            {
              "name": "keywords",
              "type": "TEXT",
              "description": "키워드 목록"
            },
            {
              "name": "response_org",
              "type": "TEXT",
              "description": "응답 요청 조직 (ALL 또는 특정 조직)"
            }
          ],
          "usage_notes": "일반적인 의제 조회의 기본 테이블"
        },
        "agenda_chair": {
          "description": "의장(Chair)이 발송한 의제 메일",
          "primary_key": "id",
          "key_columns": [
            {
              "name": "agenda_base_version",
              "type": "TEXT",
              "description": "의제 기본 버전"
            },
            {
              "name": "mail_type",
              "type": "TEXT",
              "description": "메일 유형 (request: 응답요청, notification: 알림)"
            },
            {
              "name": "has_deadline",
              "type": "INTEGER",
              "description": "마감일 존재 여부 (0 또는 1)"
            },
            {
              "name": "deadline",
              "type": "TIMESTAMP",
              "description": "응답 마감일"
            },
            {
              "name": "decision_status",
              "type": "TEXT",
              "description": "의제 상태"
            },
            {
              "name": "response_org",
              "type": "TEXT",
              "description": "응답 요청 조직"
            },
            {
              "name": "created_at",
              "type": "TIMESTAMP",
              "description": "생성 시간"
            }
          ],
          "usage_notes": "응답이 필요한 의제 조회 시 사용. mail_type='request' AND has_deadline=1 조건 필수"
        },
        "agenda_pending": {
          "description": "시스템에서 자동 분류하지 못한 보류 메일",
          "primary_key": "id",
          "key_columns": [
            {
              "name": "subject",
              "type": "TEXT",
              "description": "메일 제목"
            },
            {
              "name": "error_reason",
              "type": "TEXT",
              "description": "분류 실패 이유"
            },
            {
              "name": "created_at",
              "type": "TIMESTAMP",
              "description": "수신 시간"
            }
          ],
          "usage_notes": "대기중인 안건이 아님. 수동 처리가 필요한 미분류 메일"
        },
        "agenda_responses_content": {
          "description": "의제에 대한 각 조직의 응답 내용 (비정규화 구조)",
          "primary_key": "agenda_base_version",
          "key_columns": [
            {
              "name": "agenda_base_version",
              "type": "TEXT",
              "description": "의제 기본 버전 (PK)"
            },
            {
              "name": "ABS",
              "type": "TEXT",
              "description": "ABS 조직의 응답 내용"
            },
            {
              "name": "BV",
              "type": "TEXT",
              "description": "BV 조직의 응답 내용"
            },
            {
              "name": "CCS",
              "type": "TEXT",
              "description": "CCS 조직의 응답 내용"
            },
            {
              "name": "CRS",
              "type": "TEXT",
              "description": "CRS 조직의 응답 내용"
            },
            {
              "name": "DNV",
              "type": "TEXT",
              "description": "DNV 조직의 응답 내용"
            },
            {
              "name": "IRS",
              "type": "TEXT",
              "description": "IRS 조직의 응답 내용"
            },
            {
              "name": "KR",
              "type": "TEXT",
              "description": "KR 조직의 응답 내용"
            },
            {
              "name": "NK",
              "type": "TEXT",
              "description": "NK 조직의 응답 내용"
            },
            {
              "name": "PRS",
              "type": "TEXT",
              "description": "PRS 조직의 응답 내용"
            },
            {
              "name": "RINA",
              "type": "TEXT",
              "description": "RINA 조직의 응답 내용"
            },
            {
              "name": "IL",
              "type": "TEXT",
              "description": "IL 조직의 응답 내용"
            },
            {
              "name": "TL",
              "type": "TEXT",
              "description": "TL 조직의 응답 내용"
            },
            {
              "name": "LR",
              "type": "TEXT",
              "description": "LR 조직의 응답 내용"
            }
          ],
          "usage_notes": "각 조직별 응답은 별도 컬럼. 동적 컬럼 참조 불가, CASE 문 사용 필요"
        },
        "agenda_responses_receivedtime": {
          "description": "의제에 대한 각 조직의 응답 수신 시간",
          "primary_key": "agenda_base_version",
          "key_columns": [
            {
              "name": "agenda_base_version",
              "type": "TEXT",
              "description": "의제 기본 버전 (PK)"
            },
            {
              "name": "ABS",
              "type": "TIMESTAMP",
              "description": "ABS 응답 수신 시간"
            },
            {
              "name": "BV",
              "type": "TIMESTAMP",
              "description": "BV 응답 수신 시간"
            },
            {
              "name": "CCS",
              "type": "TIMESTAMP",
              "description": "CCS 응답 수신 시간"
            },
            {
              "name": "CRS",
              "type": "TIMESTAMP",
              "description": "CRS 응답 수신 시간"
            },
            {
              "name": "DNV",
              "type": "TIMESTAMP",
              "description": "DNV 응답 수신 시간"
            },
            {
              "name": "IRS",
              "type": "TIMESTAMP",
              "description": "IRS 응답 수신 시간"
            },
            {
              "name": "KR",
              "type": "TIMESTAMP",
              "description": "KR 응답 수신 시간"
            },
            {
              "name": "NK",
              "type": "TIMESTAMP",
              "description": "NK 응답 수신 시간"
            },
            {
              "name": "PRS",
              "type": "TIMESTAMP",
              "description": "PRS 응답 수신 시간"
            },
            {
              "name": "RINA",
              "type": "TIMESTAMP",
              "description": "RINA 응답 수신 시간"
            },
            {
              "name": "IL",
              "type": "TIMESTAMP",
              "description": "IL 응답 수신 시간"
            },
            {
              "name": "TL",
              "type": "TIMESTAMP",
              "description": "TL 응답 수신 시간"
            },
            {
              "name": "LR",
              "type": "TIMESTAMP",
              "description": "LR 응답 수신 시간"
            }
          ],
          "usage_notes": "응답 시간 분석 시 사용. 구조는 agenda_responses_content와 동일"
        }
      },
      "organization_codes": {
        "KR": "Korean Register (한국선급)",
        "NK": "Nippon Kaiji Kyokai (일본선급)",
        "CCS": "China Classification Society (중국선급)",
        "ABS": "American Bureau of Shipping (미국선급)",
        "DNV": "Det Norske Veritas (노르웨이선급)",
        "BV": "Bureau Veritas (프랑스선급)",
        "LR": "Lloyd's Register (영국선급)",
        "RINA": "Registro Italiano Navale (이탈리아선급)",
        "IRS": "Indian Register of Shipping (인도선급)",
        "PRS": "Polish Register of Shipping (폴란드선급)",
        "CRS": "Croatian Register of Shipping (크로아티아선급)",
        "TL": "Türk Loydu (터키선급)",
        "IL": "International Register (국제선급)"
      },
      "database_info": {
        "type": "SQLite",
        "path": "/home/kimghw/IACSGRAPH/data/iacsgraph.db",
        "description": "IACS(국제선급연합) 의제 관리 데이터베이스"
      },
      "query_guidelines": {
        "response_required": "agenda_chair 테이블에서 mail_type='request' AND has_deadline=1 AND deadline > datetime('now') AND decision_status != 'completed'",
        "overview": "수신된 모든 메일은 agenda_all 테이블에 저장됩니다. 각 패널의 의장은 멤버/기관들에게 메일을 발송합니다. 메일이 발송되면 각 패널의 내용은 agenda_chair에 저장됩니다. agenda_chair의 mail_type은 의장이 응답을 요구하거나 필요시 응답을 요구하거나 또는 안내인지를 식별합니다. 이 테이블에는 메일 제목, 내용 그리고 내용의 키워드들이 있습니다. 그리고 멤버/기관의 응답이 필요한 경우 deadline을 주어 기한내에 회신을 하도록 합니다. 발생된 의제에 대해서 각 멤버/기관은 각 패널의 의장에게 회신을 합니다. 회신 내용은 agenda_responses_content에 agenda_base_version별 각 멤버 또는 기관의 응답 내용이 저장되어 있습니다. agenda_base_version이 의제의 최소 단위입니다. 그리고 agenda_responses_receivedtime은 각 의제에 대해 각 기관/멤버가 응답한 시간이 기록되어 있습니다. agenda_base_version별로 응답이 저장되어 있습니다. 각 기관/멤버들의 특정 의제나 응답 시간을 보려면 agenda_responses_content에서 데이터를 찾으면 되고 의제가 무엇인지를 보려면 agenda_chair를 보면 됩니다. 이 외에는 agenda_all을 보면 자세히 기록되어 있습니다.",
        "organization_response": "agenda_responses_content의 조직별 컬럼은 CASE 문으로 접근",
        "date_filtering": "DATE('now', '-N days') 형식 사용",
        "status_values": "chair의 deadline이 있는 의제는 has_deadline=1, mail_type='request'로 필터링"
      }
    }
  },
  "database_schema": {},
  "query_guidelines": {}
}